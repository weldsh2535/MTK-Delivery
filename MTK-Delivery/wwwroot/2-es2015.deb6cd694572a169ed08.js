(window.webpackJsonp=window.webpackJsonp||[]).push([[2,18,19],{"+cje":function(t,e,r){"use strict";r.d(e,"a",function(){return l});var i=r("HDdC"),o=r("XEKg"),n=r("5Jak"),s=r("/GcI"),a=r("cxbk"),c=r("fXoL"),u=r("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.APIURL=a.a.apiURL}create(t){return this.http.post(this.APIURL+"/Restaurant",t)}getAllRestaurant(){return this.http.get(this.APIURL+"/Restaurant")}updateRestaurant(t){return this.http.put(this.APIURL+"/Restaurant/",t)}removeRestaurant(t){return this.http.delete(this.APIURL+"/Restaurant/"+t).toPromise()}handleError(t){return i.a.throw(400===t.status?new o.a(t.json()):404===t.status?new n.a:new s.a(t))}}return t.\u0275fac=function(e){return new(e||t)(c.cc(u.a))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"8D9V":function(t,e,r){"use strict";r.d(e,"a",function(){return l});var i=r("HDdC"),o=r("/GcI"),n=r("XEKg"),s=r("5Jak"),a=r("cxbk"),c=r("fXoL"),u=r("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.APIURL=a.a.apiURL}create(t){return this.http.post(this.APIURL+"/OrderDetail",t)}getAllOrderDetail(){return this.http.get(this.APIURL+"/OrderDetail")}updateOrderDetail(t){return this.http.put(this.APIURL+"/OrderDetail/",t)}removeOrderDetail(t){return this.http.delete(this.APIURL+"/OrderDetail/"+t).toPromise()}handleError(t){return i.a.throw(400===t.status?new n.a(t.json()):404===t.status?new s.a:new o.a(t))}}return t.\u0275fac=function(e){return new(e||t)(c.cc(u.a))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"Dkj+":function(t,e,r){"use strict";r.d(e,"a",function(){return l});var i=r("HDdC"),o=r("cxbk"),n=r("/GcI"),s=r("XEKg"),a=r("5Jak"),c=r("fXoL"),u=r("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.APIURL=o.a.apiURL}create(t){return this.http.post(this.APIURL+"/Food",t)}getAllFood(){return this.http.get(this.APIURL+"/Food")}updateFood(t){return this.http.put(this.APIURL+"/Food/",t)}removeFood(t){return this.http.delete(this.APIURL+"/Food/"+t).toPromise()}handleError(t){return i.a.throw(400===t.status?new s.a(t.json()):404===t.status?new a.a:new n.a(t))}}return t.\u0275fac=function(e){return new(e||t)(c.cc(u.a))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},VNSQ:function(t,e,r){"use strict";r.d(e,"a",function(){return c});var i=r("2Vo4"),o=r("cxbk"),n=r("fXoL"),s=r("tk/3"),a=r("ldse");let c=(()=>{class t{constructor(t,e){this.http=t,this.sharedService=e,this.APIURL=o.a.apiURL,this.cart=[],this.cartItemCount=new i.a(0),this.RestaurantId=new i.a({}),this.orderStatus=new i.a({}),this.order=[],this.orderItemCount=new i.a(0)}create(t){return this.http.post(this.APIURL+"/Order",t)}getAllOrder(){return this.http.get(this.APIURL+"/Order")}updateOrder(t){return this.http.put(this.APIURL+"/Order/",t)}removeOrder(t){return this.http.delete(this.APIURL+"/Order/"+t).toPromise()}getOrderBy(t){return this.http.get(this.APIURL+"/Order"+t)}getOrderByDriverId(t){return this.http.get(this.APIURL+"/Order"+t)}getCart(){return this.cart}getOrders(){return this.order}getCartItemCount(){return this.cartItemCount}getOrderItemCount(){return this.orderItemCount}getRestaurantId(){return this.RestaurantId}getOrderStatus(){return this.orderStatus}addOrder(t){this.order=[],this.amount=0,this.order.forEach(t=>{const e=this.order.indexOf(e=>e.orderDetailsId===t.orderDetailsId);this.order.splice(e,1)}),this.orderItemCount.next(0),t.forEach(t=>{this.amount=this.amount+t.amount,this.order.push({CookingTime:t.CookingTime,DeliveryTime:t.DeliveryTime,Description:t.Description,Name:t.Name,Price:t.Price,amount:t.amount,categoryId:t.categoryId,id:t.Food,picture:t.picture,restaurantId:t.restaurantId,type:t.type,orderDetailsId:t.orderDetailsId})}),this.orderItemCount.next(this.orderItemCount.value+this.amount)}addProduct(t){let e=!1;for(const r of this.cart)if(r.id===t.id){r.amount+=1,e=!0;break}e||(t.amount=1,this.cart.push(t)),this.cartItemCount.next(this.cartItemCount.value+1)}decreaseProduct(t){for(const[e,r]of this.cart.entries())r.id===t.id&&(r.amount-=1,0===r.amount&&this.cart.splice(e,1));this.cartItemCount.next(this.cartItemCount.value-1)}removeProduct(t){for(const[e,r]of this.cart.entries())r.id===t.id&&(this.cartItemCount.next(this.cartItemCount.value-r.amount),this.cart.splice(e,1))}}return t.\u0275fac=function(e){return new(e||t)(n.cc(s.a),n.cc(a.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Vefk:function(t,e,r){"use strict";r.d(e,"a",function(){return p});var i=r("mrSG"),o=r("fXoL"),n=r("TEn/"),s=r("VNSQ"),a=r("3Pt+"),c=r("tyNb"),u=r("+cje"),l=r("8D9V"),d=r("Dkj+"),h=r("ldse"),b=r("ofXK");function m(t,e){if(1&t&&(o.Vb(0,"ion-badge"),o.Ec(1),o.jc(2,"async"),o.Ub()),2&t){const t=o.ic();o.Eb(1),o.Fc(o.kc(2,1,t.cartItemCount))}}function g(t,e){if(1&t){const t=o.Wb();o.Vb(0,"ion-item",26),o.Vb(1,"ion-grid"),o.Vb(2,"ion-row",27),o.Vb(3,"ion-col",28),o.Vb(4,"ion-button",29),o.gc("click",function(){o.wc(t);const r=e.$implicit;return o.ic().decreaseCartItem(r)}),o.Rb(5,"ion-icon",30),o.Ub(),o.Ub(),o.Vb(6,"ion-col",31),o.Ec(7),o.Ub(),o.Vb(8,"ion-col",28),o.Vb(9,"ion-button",29),o.gc("click",function(){o.wc(t);const r=e.$implicit;return o.ic().increaseCartItem(r)}),o.Rb(10,"ion-icon",32),o.Ub(),o.Ub(),o.Vb(11,"ion-col",33),o.Vb(12,"ion-button",29),o.gc("click",function(){o.wc(t);const r=e.$implicit;return o.ic().removeCartItem(r)}),o.Rb(13,"ion-icon",34),o.Ub(),o.Ub(),o.Ub(),o.Vb(14,"ion-row"),o.Vb(15,"ion-col",35),o.Vb(16,"b"),o.Ec(17),o.Ub(),o.Ub(),o.Vb(18,"ion-col",36),o.Vb(19,"b"),o.Ec(20),o.jc(21,"currency"),o.Ub(),o.Ub(),o.Vb(22,"ion-col",12),o.Ec(23),o.jc(24,"currency"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&t){const t=e.$implicit;o.Eb(7),o.Gc(" ",t.amount," "),o.Eb(10),o.Fc(t.Name),o.Eb(3),o.Fc(o.lc(21,4,t.Price,"ETB")),o.Eb(3),o.Gc(" ",o.lc(24,7,t.amount*t.Price,"ETB")," ")}}let p=(()=>{class t{constructor(t,e,r,i,o,n,s,a,c){this.modalCtrl=t,this.alertCtrl=e,this.orderService=r,this.fb=i,this.router=o,this.restaurantService=n,this.orderDetailService=s,this.foodService=a,this.sharedService=c,this.cart=[],this.regform=this.fb.group({}),this.currentDate=(new Date).toISOString(),this.minDate=(new Date).toISOString(),this.maxDate=(new Date).toISOString(),this.statusDriver=[{val:"picked",isChecked:!1},{val:"start moving",isChecked:!1},{val:"delivered",isChecked:!1}],this.statusRestaurant=[{val:"order received",isChecked:!0},{val:"start cooking",isChecked:!1},{val:"cooked",isChecked:!1},{val:"ready to service",isChecked:!1}],this.status=[{val:"Accept",isChecked:!1},{val:"Reject",isChecked:!1}]}ngOnInit(){this.regform=this.fb.group({transactionType:[""],DeliveryDate:[""],DeliveryTime:[""],DeliveryAddress:[""],DeliveryFee:[""]});let t=new Date;t.setDate(t.getDate()-5),this.minDate=t.toISOString(),t=new Date,t.setDate(t.getDate()+5),this.maxDate=t.toISOString(),this.cart=this.orderService.getCart(),this.cartItemCount=this.orderService.getCartItemCount(),this.id=this.orderService.getRestaurantId().value,this.getRestaurant(),this.getFood(),this.readNOId()}getRestaurant(){this.restaurantService.getAllRestaurant().subscribe(t=>{this.listOfRestaurant=t})}getFood(){this.foodService.getAllFood().subscribe(t=>{this.listOfFood=t})}readNOId(){let t=0;this.orderService.getAllOrder().subscribe(e=>{t=0===e.length?1:e.length+1,this.orderNo=+t})}decreaseCartItem(t){this.orderService.decreaseProduct(t)}increaseCartItem(t){this.orderService.addProduct(t)}removeCartItem(t){this.presentAlertConfirm(t)}getTotal(){return this.cart.reduce((t,e)=>t+e.amount*e.price,0)}getGrandTotal(){return this.getTotal()+this.regform.get("DeliveryFee").value}close(){this.modalCtrl.dismiss()}location(){this.sharedService.status.next("cart-modal"),this.router.navigate(["/menu/location"])}order(t){this.Total=0,t.forEach(t=>{this.restaurantId=t.restaurantId});const e=this.listOfRestaurant.find(t=>t.id===+this.restaurantId),r={restaurantId:e.accountId.toString(),dateTime:this.regform.get("DeliveryDate").value,customer:localStorage.getItem("userId"),location:e.location,orderStatuses:this.statusDriver,total:this.getGrandTotal(),driver:"null",vehicle:"null",orderLocation:"null",restaurantStatuses:this.statusRestaurant,customerStatus:"true",statuses:this.status};this.orderService.create(r).subscribe(e=>Object(i.a)(this,void 0,void 0,function*(){this.orderService.getAllOrder().subscribe(e=>{t.forEach(t=>{this.restaurantId=t.restaurantId,this.Total=this.Total+t.Price*t.amount,this.orderDetailService.create({orderId:e[0].id,foodId:t.id,qty:t.amount,price:t.price}).subscribe(t=>{}),this.presentAlert("Add order succesfuly"),this.router.navigate(["/menu/order"])})})}))}presentAlert(t){return Object(i.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Order",message:t,buttons:["OK"]});yield e.present()})}presentAlertConfirm(t){return Object(i.a)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"Clear cart !",message:"<strong>Are you sure you want to remove all items in your cart ?</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{console.log("Confirm Cancel: blah")}},{text:"OK",handler:()=>{this.orderService.removeProduct(t)}}]});yield e.present()})}onclick(){this.id=this.orderService.getRestaurantId().value,this.router.navigate(["/menu/details/"+this.id])}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(n.V),o.Qb(n.a),o.Qb(s.a),o.Qb(a.b),o.Qb(c.g),o.Qb(u.a),o.Qb(l.a),o.Qb(d.a),o.Qb(h.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-cart-modal"]],decls:68,vars:12,consts:[["color","light"],["slot","start"],["fill","solid","shape","round","color","light",3,"click"],["slot","icon-only","name","arrow-back","color","primary"],[2,"text-align","center"],["slot","end"],[4,"ngIf"],["slot","icon-only","name","cart",1,"cart-icon"],["fullscreen",""],[1,"ion-padding"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["size","9"],["size","3",1,"ion-text-end"],[3,"formGroup"],["interface","popover","formControlName","transactionType"],["value","Delivery"],["value","Pickup"],["formControlName","DeliveryDate","display-format","MMM DD, YYYY HH:mm:ss","value","1990-02-19T07:43Z",3,"ngModel","ngModelChange"],["formControlName","DeliveryFee","type","number",3,"keyup"],["formControlName","DeliveryTime","display-format","h:mm A","picker-format","h:mm A","value","1990-02-19T07:43Z"],["size","1"],["name","location-outline",2,"height","27px","width","19px"],["size","8"],["size","3"],[3,"click"],["expand","full","slot","fixed",3,"click"],[1,"ion-text-wrap"],[1,"ion-align-items-center"],["size","2",1,"ion-align-self-center"],["color","medium","fill","clear",3,"click"],["name","remove-circle","slot","icon-only"],["size","1",1,"ion-align-self-center"],["name","add-circle","slot","icon-only"],["size","2","offset","5"],["name","close-circle","slot","icon-only"],["size","5"],["size","4"]],template:function(t,e){1&t&&(o.Vb(0,"ion-header"),o.Vb(1,"ion-toolbar",0),o.Vb(2,"ion-buttons",1),o.Vb(3,"ion-button",2),o.gc("click",function(){return e.onclick()}),o.Rb(4,"ion-icon",3),o.Ub(),o.Ub(),o.Vb(5,"ion-title",4),o.Ec(6,"Order Details"),o.Ub(),o.Vb(7,"ion-buttons",5),o.Vb(8,"ion-button"),o.Cc(9,m,3,3,"ion-badge",6),o.Rb(10,"ion-icon",7),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(11,"ion-content",8),o.Vb(12,"div",9),o.Vb(13,"ion-list"),o.Cc(14,g,25,10,"ion-item",10),o.Vb(15,"ion-item"),o.Vb(16,"ion-grid"),o.Vb(17,"ion-row"),o.Vb(18,"ion-col",11),o.Ec(19," Sub Total: "),o.Ub(),o.Vb(20,"ion-col",12),o.Ec(21),o.jc(22,"currency"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(23,"ion-item"),o.Vb(24,"ion-grid"),o.Vb(25,"ion-row"),o.Vb(26,"ion-col",11),o.Ec(27," Grand Total: "),o.Ub(),o.Vb(28,"ion-col",12),o.Ec(29),o.jc(30,"currency"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(31,"form",13),o.Vb(32,"ion-item"),o.Vb(33,"ion-label"),o.Ec(34,"Transation Type"),o.Ub(),o.Vb(35,"ion-select",14),o.Vb(36,"ion-select-option",15),o.Ec(37,"Delivery"),o.Ub(),o.Vb(38,"ion-select-option",16),o.Ec(39,"Pickup"),o.Ub(),o.Ub(),o.Ub(),o.Vb(40,"ion-item"),o.Vb(41,"ion-label"),o.Ec(42,"Delivery Date"),o.Ub(),o.Vb(43,"ion-datetime",17),o.gc("ngModelChange",function(t){return e.currentDate=t}),o.Ub(),o.Ub(),o.Vb(44,"ion-item"),o.Vb(45,"ion-label"),o.Ec(46,"Delivery fee"),o.Ub(),o.Vb(47,"ion-input",18),o.gc("keyup",function(){return e.getGrandTotal()}),o.Ub(),o.Ub(),o.Vb(48,"ion-item"),o.Vb(49,"ion-label"),o.Ec(50,"Delivery Time"),o.Ub(),o.Rb(51,"ion-datetime",19),o.Ub(),o.Vb(52,"ion-item"),o.Vb(53,"ion-grid"),o.Vb(54,"ion-row"),o.Vb(55,"ion-col",20),o.Vb(56,"ion-label"),o.Rb(57,"ion-icon",21),o.Ub(),o.Ub(),o.Vb(58,"ion-col",22),o.Vb(59,"ion-label"),o.Vb(60,"p"),o.Ec(61,"Delivery to current Address"),o.Ub(),o.Rb(62,"p"),o.Ub(),o.Ub(),o.Vb(63,"ion-col",23),o.Vb(64,"ion-button",24),o.gc("click",function(){return e.location()}),o.Ec(65," change "),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(66,"ion-button",25),o.gc("click",function(){return e.order(e.cart)}),o.Ec(67," Order "),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Eb(9),o.oc("ngIf",e.cart.length>0),o.Eb(5),o.oc("ngForOf",e.cart),o.Eb(7),o.Gc(" ",o.lc(22,6,e.getTotal(),"ETB")," "),o.Eb(8),o.Gc(" ",o.lc(30,9,e.getGrandTotal(),"ETB")," "),o.Eb(2),o.oc("formGroup",e.regform),o.Eb(12),o.oc("ngModel",e.currentDate))},directives:[n.r,n.R,n.j,n.i,n.s,n.P,b.n,n.l,n.y,b.m,n.v,n.q,n.F,n.k,a.p,a.j,a.d,n.x,n.J,n.Z,a.i,a.c,n.K,n.m,n.u,n.W,n.h],pipes:[b.d,b.b],styles:["ion-badge[_ngcontent-%COMP%]{color:#fff;position:absolute;top:-9px;right:2px;border-radius:100%}.cart-icon[_ngcontent-%COMP%]{font-size:50px}.cart-length[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;top:18px;left:25px;font-weight:600;font-size:1em;min-width:25px;z-index:10}"]}),t})()},ldse:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r("2Vo4"),o=r("fXoL");let n=(()=>{class t{constructor(){this.currentAddress=new i.a({}),this.restaurant=new i.a({}),this.status=new i.a({}),this.location=new i.a({}),this.orderId=new i.a({}),this.RestaurantLocation=new i.a({}),this.resId=new i.a({}),this.listOfCatagoryFilter=new i.a({}),this.deriverId=new i.a({}),this.customerId=new i.a({}),this.driverName=new i.a({})}getCurrentAddress(){return this.currentAddress}getMenuFilter(){return this.listOfCatagoryFilter}getLocation(){return this.location}getStatus(){return this.status}getRestaurantLocation(){return this.RestaurantLocation}getRestaurantId(){return this.resId}getDriverId(){return this.deriverId}getCustomerId(){return this.customerId}getDriverName(){return this.driverName}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);