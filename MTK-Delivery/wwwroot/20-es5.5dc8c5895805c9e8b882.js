!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"3tpA":function(t,i,s){"use strict";s.r(i),s.d(i,"MessagePageModule",function(){return C});var o,r,a,u,c=s("ofXK"),d=s("3Pt+"),l=s("TEn/"),h=s("tyNb"),f=s("fXoL"),g=s("ldse"),m=s("cxbk"),b=s("tk/3"),v=((u=function(){function t(n){e(this,t),this.http=n,this.APIURL=m.a.apiURL}return n(t,[{key:"create",value:function(e){return this.http.post(this.APIURL+"/Message",e)}},{key:"getAllMessage",value:function(){return this.http.get(this.APIURL+"/Message")}},{key:"updateMessage",value:function(e){return this.http.put(this.APIURL+"/Message/",e)}},{key:"removeMessage",value:function(e){return this.http.delete(this.APIURL+"/Message/"+e).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||u)(f.cc(b.a))},u.\u0275prov=f.Mb({token:u,factory:u.\u0275fac,providedIn:"root"}),u),p=((a=function(){function t(){e(this,t)}return n(t,[{key:"nativeWindow",get:function(){return window}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=f.Mb({token:a,factory:a.\u0275fac,providedIn:"root"}),a.ngInjectableDef=Object(f.Mb)({factory:function(){return new a},token:a,providedIn:"root"}),a),w=((r=function(){function t(n,i,s){e(this,t),this.element=n,this._window=i,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new f.o,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}return n(t,[{key:"minRows",set:function(e){this._minRows=e,this.textAreaEl&&(this.textAreaEl.rows=e)}},{key:"onInput",value:function(e){this.adjust()}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}},{key:"ngAfterContentChecked",value:function(){this.adjust()}},{key:"ngOnChanges",value:function(e){this.adjust(!0)}},{key:"_findNestedTextArea",value:function(){var e=this;this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(function(){e._findNestedTextArea()},100))}},{key:"_onTextAreaFound",value:function(){var e=this;this._addWindowResizeHandler(),setTimeout(function(){e.adjust()})}},{key:"_addWindowResizeHandler",value:function(){var e=this;this._windowResizeHandler=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var s=this,o=arguments,r=function(){n=null,i||e.apply(s,o)},a=i&&!n;clearTimeout(n),n=setTimeout(r,t),a&&e.apply(s,o)}}(function(){e._zone.run(function(){e.adjust()})},200),this._zone.runOutsideAngular(function(){e._window.nativeWindow.addEventListener("resize",e._windowResizeHandler,!1)})}},{key:"adjust",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){var t=this.textAreaEl.value;if(!1===e&&t===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=t,this._oldWidth=this.textAreaEl.offsetWidth;var n=this.textAreaEl.cloneNode(!0),i=this.textAreaEl.parentNode;n.style.width=this.textAreaEl.offsetWidth+"px",n.style.visibility="hidden",n.style.position="absolute",n.textContent=t,i.appendChild(n),n.style.overflow="hidden",n.style.height="auto";var s=n.scrollHeight,o=this._window.nativeWindow.getComputedStyle(n,null);s+=parseInt(o.getPropertyValue("border-top-width")),s+=parseInt(o.getPropertyValue("border-bottom-width")),s+=parseInt(o.getPropertyValue("padding-top")),s+=parseInt(o.getPropertyValue("padding-bottom"));var r=this.textAreaEl.offsetHeight,a=s>r;if(!1===this.onlyGrow||a){var u=this._getLineHeight(),c=s/u;if(this._minRows&&this._minRows>=c)s=this._minRows*u;else if(this.maxRows&&this.maxRows<=c){var d=this.maxRows*u;s=this.onlyGrow?Math.max(d,r):d,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";this.textAreaEl.style.setProperty("height",s+"px",this.useImportant?"important":""),this.resized.emit(s)}i.removeChild(n)}}},{key:"_getLineHeight",value:function(){var e=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(e)&&this._window.nativeWindow.getComputedStyle){var t=this._window.nativeWindow.getComputedStyle(this.textAreaEl);e=parseInt(t.lineHeight,10)}if(isNaN(e)){var n=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");e=Math.floor(1.5*parseInt(n.replace("px",""),10))}return e}}]),t}()).\u0275fac=function(e){return new(e||r)(f.Qb(f.m),f.Qb(p),f.Qb(f.C))},r.\u0275dir=f.Lb({type:r,selectors:[["","autosize",""]],hostBindings:function(e,t){1&e&&f.gc("input",function(e){return t.onInput(e.target)})},inputs:{onlyGrow:"onlyGrow",useImportant:"useImportant",minRows:"minRows",maxRows:"maxRows"},outputs:{resized:"resized"},features:[f.Cb]}),r),y=((o=function t(){e(this,t)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=f.Ob({type:o}),o.\u0275inj=f.Nb({providers:[p],imports:[[]]}),o);function I(e,t){if(1&e&&(f.Vb(0,"ion-col",12),f.Vb(1,"b"),f.Ec(2),f.Ub(),f.Vb(3,"span"),f.Ec(4),f.Ub(),f.Vb(5,"div",13),f.Rb(6,"br"),f.Ec(7),f.jc(8,"date"),f.Ub(),f.Ub()),2&e){var n=f.ic().$implicit;f.Eb(2),f.Fc(n.user),f.Eb(2),f.Fc(n.msgcontent),f.Eb(3),f.Gc(" ",f.lc(8,3,n.date,"short")," ")}}function E(e,t){if(1&e&&(f.Vb(0,"ion-col",14),f.Vb(1,"b"),f.Ec(2),f.Ub(),f.Vb(3,"span"),f.Ec(4),f.Ub(),f.Vb(5,"div",13),f.Rb(6,"br"),f.Ec(7),f.jc(8,"date"),f.Ub(),f.Ub()),2&e){var n=f.ic().$implicit;f.Eb(2),f.Fc(n.user),f.Eb(2),f.Fc(n.msgcontent),f.Eb(3),f.Gc(" ",f.lc(8,3,n.date,"short")," ")}}function x(e,t){if(1&e&&(f.Vb(0,"ion-row"),f.Cc(1,I,9,6,"ion-col",10),f.Cc(2,E,9,6,"ion-col",11),f.Ub()),2&e){var n=t.$implicit,i=f.ic();f.Eb(1),f.oc("ngIf",i.currentUser!==n.sessionId),f.Eb(1),f.oc("ngIf",i.currentUser===n.sessionId)}}var A,k,_,M=[{path:"",component:(A=function(){function t(n,i){e(this,t),this.sharedService=n,this.messageService=i}return n(t,[{key:"ngOnInit",value:function(){this.customerName=this.sharedService.getDriverName().value,this.driverId=this.sharedService.getDriverId().value,this.customerId=this.sharedService.getCustomerId().value,this.currentUser=this.customerId,this.getMessage()}},{key:"getMessage",value:function(){var e=this;this.messageService.getAllMessage().subscribe(function(t){var n=t.filter(function(t){return t.userId==localStorage.getItem("userId")&&t.driverId==e.driverId});e.listOfMessage=n.sort(function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()}),e.currentUser=localStorage.getItem("userId")})}},{key:"sendMessage",value:function(){var e=this,t={msgcontent:this.newMsg,date:new Date,userId:this.customerId,driverId:this.driverId,sessionId:localStorage.getItem("userId")};this.listOfMessage.push(t),this.listOfMessage.sort(function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()}),this.messageService.create(t).subscribe(function(e){alert(e.toString())}),this.newMsg="",setTimeout(function(){e.content.scrollToBottom(200)})}}]),t}(),A.\u0275fac=function(e){return new(e||A)(f.Qb(g.a),f.Qb(v))},A.\u0275cmp=f.Kb({type:A,selectors:[["app-message"]],viewQuery:function(e,t){var n;1&e&&f.Ic(l.l,1),2&e&&f.uc(n=f.hc())&&(t.content=n.first)},decls:17,vars:4,consts:[["color","light"],["slot","start"],["defaultHref","detail"],[4,"ngFor","ngForOf"],["align-items-center","","no-padding",""],["size","10"],["autosize","","maxRows","4",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear","color","primary",1,"msg-btn",3,"disabled","click"],["name","send-outline"],["size","9","class","message other-message",4,"ngIf"],["offset","3","size","9","class","message my-message",4,"ngIf"],["size","9",1,"message","other-message"],["text-right","",1,"time"],["offset","3","size","9",1,"message","my-message"]],template:function(e,t){1&e&&(f.Vb(0,"ion-header"),f.Vb(1,"ion-toolbar",0),f.Vb(2,"ion-buttons",1),f.Rb(3,"ion-back-button",2),f.Ub(),f.Vb(4,"ion-title"),f.Ec(5),f.Ub(),f.Ub(),f.Ub(),f.Vb(6,"ion-content"),f.Vb(7,"ion-grid"),f.Cc(8,x,3,2,"ion-row",3),f.Ub(),f.Vb(9,"ion-footer"),f.Vb(10,"ion-toolbar"),f.Vb(11,"ion-row",4),f.Vb(12,"ion-col",5),f.Vb(13,"textarea",6),f.gc("ngModelChange",function(e){return t.newMsg=e}),f.Ub(),f.Ub(),f.Vb(14,"ion-col",7),f.Vb(15,"ion-button",8),f.gc("click",function(){return t.sendMessage()}),f.Rb(16,"ion-icon",9),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Eb(5),f.Fc(t.customerName),f.Eb(3),f.oc("ngForOf",t.listOfMessage),f.Eb(5),f.oc("ngModel",t.newMsg),f.Eb(2),f.oc("disabled",""===t.newMsg))},directives:[l.r,l.R,l.j,l.f,l.g,l.P,l.l,l.q,c.m,l.p,l.F,l.k,d.a,w,d.i,d.k,l.i,l.s,c.n],pipes:[c.f],styles:[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em;margin-top:10px}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}ion-fab[_ngcontent-%COMP%]{width:100%}"]}),A)}],R=((_=function t(){e(this,t)}).\u0275fac=function(e){return new(e||_)},_.\u0275mod=f.Ob({type:_}),_.\u0275inj=f.Nb({imports:[[h.j.forChild(M)],h.j]}),_),C=((k=function t(){e(this,t)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=f.Ob({type:k}),k.\u0275inj=f.Nb({imports:[[c.c,d.e,l.S,R,d.m,y]]}),k)},ldse:function(t,i,s){"use strict";s.d(i,"a",function(){return a});var o=s("2Vo4"),r=s("fXoL"),a=function(){var t=function(){function t(){e(this,t),this.currentAddress=new o.a({}),this.restaurant=new o.a({}),this.status=new o.a({}),this.location=new o.a({}),this.orderId=new o.a({}),this.RestaurantLocation=new o.a({}),this.resId=new o.a({}),this.listOfCatagoryFilter=new o.a({}),this.deriverId=new o.a({}),this.customerId=new o.a({}),this.driverName=new o.a({})}return n(t,[{key:"getCurrentAddress",value:function(){return this.currentAddress}},{key:"getMenuFilter",value:function(){return this.listOfCatagoryFilter}},{key:"getLocation",value:function(){return this.location}},{key:"getStatus",value:function(){return this.status}},{key:"getRestaurantLocation",value:function(){return this.RestaurantLocation}},{key:"getRestaurantId",value:function(){return this.resId}},{key:"getDriverId",value:function(){return this.deriverId}},{key:"getCustomerId",value:function(){return this.customerId}},{key:"getDriverName",value:function(){return this.driverName}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();