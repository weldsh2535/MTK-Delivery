(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"3tpA":function(e,t,s){"use strict";s.r(t),s.d(t,"MessagePageModule",function(){return I});var i=s("ofXK"),n=s("3Pt+"),r=s("TEn/"),o=s("tyNb"),a=s("fXoL"),d=s("ldse"),c=s("cxbk"),l=s("tk/3");let h=(()=>{class e{constructor(e){this.http=e,this.APIURL=c.a.apiURL}create(e){return this.http.post(this.APIURL+"/Message",e)}getAllMessage(){return this.http.get(this.APIURL+"/Message")}updateMessage(e){return this.http.put(this.APIURL+"/Message/",e)}removeMessage(e){return this.http.delete(this.APIURL+"/Message/"+e).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(a.cc(l.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),u=(()=>{class e{get nativeWindow(){return window}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(a.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),g=(()=>{class e{constructor(e,t,s){this.element=e,this._window=t,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new a.o,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}set minRows(e){this._minRows=e,this.textAreaEl&&(this.textAreaEl.rows=e)}onInput(e){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(e){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function(e,t,s=!1){let i;return function(){const n=this,r=arguments,o=function(){i=null,s||e.apply(n,r)},a=s&&!i;clearTimeout(i),i=setTimeout(o,t),a&&e.apply(n,r)}}(()=>{this._zone.run(()=>{this.adjust()})},200),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(e=!1){if(!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const t=this.textAreaEl.value;if(!1===e&&t===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=t,this._oldWidth=this.textAreaEl.offsetWidth;const s=this.textAreaEl.cloneNode(!0),i=this.textAreaEl.parentNode;s.style.width=this.textAreaEl.offsetWidth+"px",s.style.visibility="hidden",s.style.position="absolute",s.textContent=t,i.appendChild(s),s.style.overflow="hidden",s.style.height="auto";let n=s.scrollHeight,r=this._window.nativeWindow.getComputedStyle(s,null);n+=parseInt(r.getPropertyValue("border-top-width")),n+=parseInt(r.getPropertyValue("border-bottom-width")),n+=parseInt(r.getPropertyValue("padding-top")),n+=parseInt(r.getPropertyValue("padding-bottom"));const o=this.textAreaEl.offsetHeight,a=n>o;if(!1===this.onlyGrow||a){const e=this._getLineHeight(),t=n/e;if(this._minRows&&this._minRows>=t)n=this._minRows*e;else if(this.maxRows&&this.maxRows<=t){const t=this.maxRows*e;n=this.onlyGrow?Math.max(t,o):t,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";this.textAreaEl.style.setProperty("height",n+"px",this.useImportant?"important":""),this.resized.emit(n)}i.removeChild(s)}}_getLineHeight(){let e=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(e)&&this._window.nativeWindow.getComputedStyle){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl);e=parseInt(t.lineHeight,10)}if(isNaN(e)){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");e=Math.floor(1.5*parseInt(t.replace("px",""),10))}return e}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(a.m),a.Qb(u),a.Qb(a.C))},e.\u0275dir=a.Lb({type:e,selectors:[["","autosize",""]],hostBindings:function(e,t){1&e&&a.gc("input",function(e){return t.onInput(e.target)})},inputs:{onlyGrow:"onlyGrow",useImportant:"useImportant",minRows:"minRows",maxRows:"maxRows"},outputs:{resized:"resized"},features:[a.Cb]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({providers:[u],imports:[[]]}),e})();function b(e,t){if(1&e&&(a.Vb(0,"ion-col",12),a.Vb(1,"b"),a.Ec(2),a.Ub(),a.Vb(3,"span"),a.Ec(4),a.Ub(),a.Vb(5,"div",13),a.Rb(6,"br"),a.Ec(7),a.jc(8,"date"),a.Ub(),a.Ub()),2&e){const e=a.ic().$implicit;a.Eb(2),a.Fc(e.user),a.Eb(2),a.Fc(e.msgcontent),a.Eb(3),a.Gc(" ",a.lc(8,3,e.date,"short")," ")}}function f(e,t){if(1&e&&(a.Vb(0,"ion-col",14),a.Vb(1,"b"),a.Ec(2),a.Ub(),a.Vb(3,"span"),a.Ec(4),a.Ub(),a.Vb(5,"div",13),a.Rb(6,"br"),a.Ec(7),a.jc(8,"date"),a.Ub(),a.Ub()),2&e){const e=a.ic().$implicit;a.Eb(2),a.Fc(e.user),a.Eb(2),a.Fc(e.msgcontent),a.Eb(3),a.Gc(" ",a.lc(8,3,e.date,"short")," ")}}function p(e,t){if(1&e&&(a.Vb(0,"ion-row"),a.Cc(1,b,9,6,"ion-col",10),a.Cc(2,f,9,6,"ion-col",11),a.Ub()),2&e){const e=t.$implicit,s=a.ic();a.Eb(1),a.oc("ngIf",s.currentUser!==e.sessionId),a.Eb(1),a.oc("ngIf",s.currentUser===e.sessionId)}}const w=[{path:"",component:(()=>{class e{constructor(e,t){this.sharedService=e,this.messageService=t}ngOnInit(){this.customerName=this.sharedService.getDriverName().value,this.driverId=this.sharedService.getDriverId().value,this.customerId=this.sharedService.getCustomerId().value,this.currentUser=this.customerId,this.getMessage()}getMessage(){this.messageService.getAllMessage().subscribe(e=>{let t=e.filter(e=>e.userId==localStorage.getItem("userId")&&e.driverId==this.driverId);this.listOfMessage=t.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),this.currentUser=localStorage.getItem("userId")})}sendMessage(){let e={msgcontent:this.newMsg,date:new Date,userId:this.customerId,driverId:this.driverId,sessionId:localStorage.getItem("userId")};this.listOfMessage.push(e),this.listOfMessage.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),this.messageService.create(e).subscribe(e=>{alert(e.toString())}),this.newMsg="",setTimeout(()=>{this.content.scrollToBottom(200)})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(d.a),a.Qb(h))},e.\u0275cmp=a.Kb({type:e,selectors:[["app-message"]],viewQuery:function(e,t){if(1&e&&a.Ic(r.l,1),2&e){let e;a.uc(e=a.hc())&&(t.content=e.first)}},decls:17,vars:4,consts:[["color","light"],["slot","start"],["defaultHref","detail"],[4,"ngFor","ngForOf"],["align-items-center","","no-padding",""],["size","10"],["autosize","","maxRows","4",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear","color","primary",1,"msg-btn",3,"disabled","click"],["name","send-outline"],["size","9","class","message other-message",4,"ngIf"],["offset","3","size","9","class","message my-message",4,"ngIf"],["size","9",1,"message","other-message"],["text-right","",1,"time"],["offset","3","size","9",1,"message","my-message"]],template:function(e,t){1&e&&(a.Vb(0,"ion-header"),a.Vb(1,"ion-toolbar",0),a.Vb(2,"ion-buttons",1),a.Rb(3,"ion-back-button",2),a.Ub(),a.Vb(4,"ion-title"),a.Ec(5),a.Ub(),a.Ub(),a.Ub(),a.Vb(6,"ion-content"),a.Vb(7,"ion-grid"),a.Cc(8,p,3,2,"ion-row",3),a.Ub(),a.Vb(9,"ion-footer"),a.Vb(10,"ion-toolbar"),a.Vb(11,"ion-row",4),a.Vb(12,"ion-col",5),a.Vb(13,"textarea",6),a.gc("ngModelChange",function(e){return t.newMsg=e}),a.Ub(),a.Ub(),a.Vb(14,"ion-col",7),a.Vb(15,"ion-button",8),a.gc("click",function(){return t.sendMessage()}),a.Rb(16,"ion-icon",9),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Eb(5),a.Fc(t.customerName),a.Eb(3),a.oc("ngForOf",t.listOfMessage),a.Eb(5),a.oc("ngModel",t.newMsg),a.Eb(2),a.oc("disabled",""===t.newMsg))},directives:[r.r,r.R,r.j,r.f,r.g,r.P,r.l,r.q,i.m,r.p,r.F,r.k,n.a,g,n.i,n.k,r.i,r.s,i.n],pipes:[i.f],styles:[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em;margin-top:10px}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}ion-fab[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({imports:[[o.j.forChild(w)],o.j]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({imports:[[i.c,n.e,r.S,v,n.m,m]]}),e})()},ldse:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("2Vo4"),n=s("fXoL");let r=(()=>{class e{constructor(){this.currentAddress=new i.a({}),this.restaurant=new i.a({}),this.status=new i.a({}),this.location=new i.a({}),this.orderId=new i.a({}),this.RestaurantLocation=new i.a({}),this.resId=new i.a({}),this.listOfCatagoryFilter=new i.a({}),this.deriverId=new i.a({}),this.customerId=new i.a({}),this.driverName=new i.a({})}getCurrentAddress(){return this.currentAddress}getMenuFilter(){return this.listOfCatagoryFilter}getLocation(){return this.location}getStatus(){return this.status}getRestaurantLocation(){return this.RestaurantLocation}getRestaurantId(){return this.resId}getDriverId(){return this.deriverId}getCustomerId(){return this.customerId}getDriverName(){return this.driverName}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);